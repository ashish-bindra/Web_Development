
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Dockerfiles - Web Development Tutorials</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dockerfiles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Web Development Tutorials" class="md-header__button md-logo" aria-label="Web Development Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Web Development Tutorials
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dockerfiles
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../database/" class="md-tabs__link">
          
  
  
    
  
  database

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Django/" class="md-tabs__link">
          
  
  
    
  
  Django

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../js/durgajs/" class="md-tabs__link">
          
  
  
    
  
  js

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../FastApi/" class="md-tabs__link">
          
  
  
    
  
  Fastapi

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/poetry/" class="md-tabs__link">
          
  
  
    
  
  tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../pydantic/" class="md-tabs__link">
        
  
  
    
  
  Pydantic

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../important/" class="md-tabs__link">
        
  
  
    
  
  imp

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../revision/" class="md-tabs__link">
        
  
  
    
  
  revision

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Web Development Tutorials" class="md-nav__button md-logo" aria-label="Web Development Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Web Development Tutorials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../database/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    database
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/view/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    View
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/indexes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/equi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Equi-join
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/self_join/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    self-join
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/subqueries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    sub-query
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/sql%20faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/DA_SQL_Sorting_Grouping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DA SQL Grouping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    query
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/practice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    practice
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/interview_pratical/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    interview praticale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/interview_theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    interview theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/radis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    radis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Django/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Django
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Django/Django/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Django
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    js
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            js
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../js/durgajs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../js/dom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DOM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../js/jQuery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JQuery
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../FastApi/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Fastapi
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Fastapi
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FastApi/celery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    celery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FastApi/asynchronous_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Async_api
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/poetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    poetry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../important/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    imp
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../revision/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    revision
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#order-dockerfile-commands-appropriately" class="md-nav__link">
    <span class="md-ellipsis">
      Order Dockerfile Commands Appropriately
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-small-docker-base-images" class="md-nav__link">
    <span class="md-ellipsis">
      Use Small Docker Base Images
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimize-the-number-of-layers" class="md-nav__link">
    <span class="md-ellipsis">
      Minimize the Number of Layers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-unprivileged-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Use Unprivileged Containers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefer-copy-over-add" class="md-nav__link">
    <span class="md-ellipsis">
      Prefer COPY Over ADD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prefer COPY Over ADD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#whats-the-difference-between-copy-and-add" class="md-nav__link">
    <span class="md-ellipsis">
      What's the difference between COPY and ADD?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cache-python-packages-to-the-docker-host" class="md-nav__link">
    <span class="md-ellipsis">
      Cache Python Packages to the Docker Host
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-only-one-process-per-container" class="md-nav__link">
    <span class="md-ellipsis">
      Run Only One Process Per Container
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prefer-array-over-string-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Prefer Array Over String Syntax
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understand-the-difference-between-entrypoint-and-cmd" class="md-nav__link">
    <span class="md-ellipsis">
      Understand the Difference Between ENTRYPOINT and CMD
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="dockerfiles">Dockerfiles<a class="headerlink" href="#dockerfiles" title="Permanent link">&para;</a></h1>
<p>Use Multi-stage Builds</p>
<p>Take advantage of multi-stage builds to create leaner, more secure Docker images.</p>
<p>Multi-stage Docker builds allow you to break up your Dockerfiles into several stages</p>
<h2 id="order-dockerfile-commands-appropriately">Order Dockerfile Commands Appropriately<a class="headerlink" href="#order-dockerfile-commands-appropriately" title="Permanent link">&para;</a></h2>
<p>Pay close attention to the order of your Dockerfile commands to leverage layer caching.</p>
<ul>
<li>Docker caches each step (or layer) in a particular Dockerfile to speed up subsequent builds.</li>
<li>When a step changes, the cache will be invalidated not only for that particular step but all succeeding steps.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>FROM python:3.12.2-slim
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>WORKDIR /app
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>COPY sample.py .
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>COPY requirements.txt .
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>RUN pip install -r requirements.txt
</code></pre></div>
<p>In this Dockerfile, we copied over the application code before installing the requirements. Now, each time we change sample.py, the build will reinstall the packages.</p>
<p>his is very inefficient, especially when using a Docker container as a development environment. Therefore, it's crucial to keep the files that frequently change towards the end of the Dockerfile.</p>
<p>Note</p>
<p>You can also help prevent unwanted cache invalidations by using a .dockerignore file to exclude unnecessary files from being added to the Docker build context and the final image</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>FROM python:3.12.2-slim
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>WORKDIR /app
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>COPY requirements.txt .
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>RUN pip install -r requirements.txt
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>COPY sample.py .
</code></pre></div>
<ol>
<li>Always put layers that are likely to change as low as possible in the Dockerfile.</li>
<li>Combine RUN apt-get update and RUN apt-get install commands. (This also helps to reduce the image size. We'll touch on this shortly.)</li>
<li>If you want to turn off caching for a particular Docker build, add the --no-cache=True flag.</li>
</ol>
<h2 id="use-small-docker-base-images">Use Small Docker Base Images<a class="headerlink" href="#use-small-docker-base-images" title="Permanent link">&para;</a></h2>
<p>Smaller Docker images are more modular and secure.</p>
<p>Building, pushing, and pulling images is quicker with smaller images.</p>
<ul>
<li>They also tend to be more secure since they only include the necessary libraries and system dependencies required for running your application.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>REPOSITORY   TAG                    IMAGE ID         CREATED          SIZE
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>python       3.12.2-bookworm        939b824ad847     40 hours ago     1.02GB
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>python       3.12.2-slim            24c52ee82b5c     40 hours ago     130MB
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>python       3.12.2-slim-bookworm   24c52ee82b5c     40 hours ago     130MB
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>python       3.12.2-alpine          c54b53ca8371     40 hours ago     51.8MB
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>python       3.12.2-alpine3.19      c54b53ca8371     40 hours ago     51.8MB
</code></pre></div>
<p>While the Alpine flavor, based on Alpine Linux, is the smallest, it can often lead to increased build times if you can't find compiled binaries that work with it. As a result, you may end up having to build the binaries yourself, which can increase the image size (depending on the required system-level dependencies) and the build times (due to having to compile from the source).</p>
<p>Using Alpine can make Python Docker builds 50× slower</p>
<p><a href="https://pythonspeed.com/articles/alpine-docker-python/">https://pythonspeed.com/articles/alpine-docker-python/</a></p>
<p>*-slim flavor, especially in development mode, as you're building your application. You want to avoid having to continually update the Dockerfile to install necessary system-level dependencies when you add a new Python package.</p>
<p>don't forget to update your base images regularly to improve security and boost performance. When a new version of a base image is released -- e.g., 3.11.8-slim -&gt; 3.12.2-slim -- you should pull the new image and update your running containers to get all the latest security patches.</p>
<h2 id="minimize-the-number-of-layers">Minimize the Number of Layers<a class="headerlink" href="#minimize-the-number-of-layers" title="Permanent link">&para;</a></h2>
<ul>
<li>It's a good idea to combine the RUN, COPY, and ADD commands as much as possible since they create layers.</li>
<li>Each layer increases the size of the image since they are cached.</li>
<li>as the number of layers increases, the size also increases.</li>
</ul>
<p>You can test this out with the docker history command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker images
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>REPOSITORY   TAG       IMAGE ID       CREATED          SIZE
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>dockerfile   latest    180f98132d02   51 seconds ago   259MB
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>$ docker history 180f98132d02
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>IMAGE          CREATED              CREATED BY                                      SIZE      COMMENT
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>180f98132d02   58 seconds ago       COPY . . # buildkit                             6.71kB    buildkit.dockerfile.v0
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>&lt;missing&gt;      58 seconds ago       RUN /bin/sh -c pip install -r requirements.t…   35.5MB    buildkit.dockerfile.v0
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>&lt;missing&gt;      About a minute ago   COPY requirements.txt . # buildkit              58B       buildkit.dockerfile.v0
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>&lt;missing&gt;      About a minute ago   WORKDIR /app
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>...
</code></pre></div>
<p>Take note of the sizes. Only the RUN, COPY, and ADD commands add size to the image. You can reduce the image size by combining commands wherever possible. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>RUN apt-get update
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>RUN apt-get install -y netcat
</code></pre></div>
<p>Can be combined into a single RUN command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>RUN apt-get update &amp;&amp; apt-get install -y netcat
</code></pre></div>
<p>Thus, creating a single layer instead of two, which reduces the size of the final image.</p>
<p>In other words, focus more on the previous three practices -- multi-stage builds, order of your Dockerfile commands, and using a small base image -- than trying to optimize every single command.</p>
<p>Notes:</p>
<ol>
<li>RUN, COPY, and ADD each create layers.</li>
<li>Each layer contains the differences from the previous layer.</li>
<li>Layers increase the size of the final image</li>
</ol>
<p>Tips:</p>
<ol>
<li>Combine related commands.</li>
<li>Remove unnecessary files in the same RUN step that created them.</li>
<li>Minimize the number of times apt-get upgrade is run since it upgrades all packages to the latest version.</li>
<li>With multi-stage builds, don't worry too much about overly optimizing the commands in temp stages.</li>
</ol>
<p>Finally, for readability, it's a good idea to sort multi-line arguments alphanumerically</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>RUN apt-get update &amp;&amp; apt-get install -y \
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    git \
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    gcc \
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    matplotlib \
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    pillow  \
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    &amp;&amp; apt-get clean \
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    &amp;&amp; rm -rf /var/lib/apt/lists/*
</code></pre></div>
<p>it's crucial to perform clean-up actions within the same RUN instruction to avoid unnecessary bloat in your Docker images</p>
<p>This approach ensures that temporary files or cache used during installation are not included in the final image layer, effectively reducing the image size.</p>
<p>For example, after installing packages with apt-get, use &amp;&amp; apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/* to remove the package lists and any temporary files created during the installation process, as demonstrated above</p>
<h2 id="use-unprivileged-containers">Use Unprivileged Containers<a class="headerlink" href="#use-unprivileged-containers" title="Permanent link">&para;</a></h2>
<p>Docker runs container processes as root inside of a container. However, this is a bad practice since a process running as root inside the container is running as root in the Docker host.</p>
<p>if an attacker gains access to your container, they have access to all the root privileges and can perform several attacks against the Docker host, like-</p>
<ol>
<li>copying sensitive info from the host's filesystem to the container</li>
<li>executing remote commands</li>
</ol>
<p>To prevent this, make sure to run container processes with a non-root user:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>RUN addgroup --system app &amp;&amp; adduser --system --group app
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>USER app
</code></pre></div>
<p>You can take it a step further and remove shell access and ensure there's no home directory as well:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="l l-Scalar l-Scalar-Plain">RUN addgroup --gid 1001 --system app &amp;&amp; \</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">adduser --no-create-home --shell /bin/false --disabled-password --uid 1001 --system --group app</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="l l-Scalar l-Scalar-Plain">USER app</span>
</code></pre></div>
<p>Verify:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>docker run -i sample id
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>uid=1001(app) gid=1001(app) groups=1001(app)
</code></pre></div>
<p>the Docker daemon and the container itself still run with root privileges. Be sure to review Run the Docker daemon as a non-root user for help with running both the daemon and containers as a non-root user.</p>
<h2 id="prefer-copy-over-add">Prefer COPY Over ADD<a class="headerlink" href="#prefer-copy-over-add" title="Permanent link">&para;</a></h2>
<p>Use COPY unless you're sure you need the additional functionality that comes with ADD.</p>
<h3 id="whats-the-difference-between-copy-and-add">What's the difference between COPY and ADD?<a class="headerlink" href="#whats-the-difference-between-copy-and-add" title="Permanent link">&para;</a></h3>
<p>Both commands allow you to copy files from a specific location into a Docker image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ADD &lt;src&gt; &lt;dest&gt;
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>COPY &lt;src&gt; &lt;dest&gt;
</code></pre></div>
<p>While they look like they serve the same purpose, ADD has some additional functionality:</p>
<ul>
<li>COPY is used for copying local files or directories from the Docker host to the image.</li>
<li>ADD can be used for the same thing as well as downloading external files. Also, if you use a compressed file (tar, gzip, bzip2, etc.) as the <src> parameter, ADD will automatically unpack the contents to the given location.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a># copy local files on the host to the destination
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>COPY /source/path  /destination/path
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>ADD /source/path  /destination/path
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a># download external file and copy to the destination
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>ADD http://external.file/url  /destination/path
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a># copy and extract local compresses files
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>ADD source.file.tar.gz /destination/path
</code></pre></div>
<h2 id="cache-python-packages-to-the-docker-host">Cache Python Packages to the Docker Host<a class="headerlink" href="#cache-python-packages-to-the-docker-host" title="Permanent link">&para;</a></h2>
<p>When a requirements file is changed, the image needs to be rebuilt to install the new packages. The earlier steps will be cached, as mentioned in Minimize the Number of Layers. Downloading all packages while rebuilding the image can cause a lot of network activity and takes a lot of time. Each rebuild takes up the same amount of time for downloading common packages across builds.</p>
<p>You can avoid this by mapping the pip cache directory to a directory on the host machine. So for each rebuild, the cached versions persist and can improve the build speed.</p>
<p>Add a volume to the docker run as -v $HOME/.cache/pip-docker/:/root/.cache/pip or as a mapping in the Docker Compose file.</p>
<p>The directory presented above is only for reference. Make sure you map the cache directory and not the site-packages (where the built packages reside).</p>
<p>Moving the cache from the docker image to the host can save you space in the final image.</p>
<p>If you're leveraging Docker BuildKit, use BuildKit cache mounts to manage the cache:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>COPY requirements.txt .
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>RUN --mount=type=cache,target=/root/.cache/pip \
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>        pip install -r requirements.txt
</code></pre></div>
<h2 id="run-only-one-process-per-container">Run Only One Process Per Container<a class="headerlink" href="#run-only-one-process-per-container" title="Permanent link">&para;</a></h2>
<p>Why is it recommended to run only one process per container?</p>
<p>Let's assume your application stack consists of a two web servers and a database. While you could easily run all three from a single container, you should run each in a separate container to make it easier to reuse and scale each of the individual services.</p>
<ol>
<li>Scaling - With each service in a separate container, you can scale one of your web servers horizontally as needed to handle more traffic.</li>
<li>Reusability - Perhaps you have another service that needs a containerized database. You can simply reuse the same database container without bringing two unnecessary services along with it.</li>
<li>Portability and Predictability - It's much easier to make security patches or debug an issue when there's less surface area to work with.</li>
</ol>
<h2 id="prefer-array-over-string-syntax">Prefer Array Over String Syntax<a class="headerlink" href="#prefer-array-over-string-syntax" title="Permanent link">&para;</a></h2>
<p>You can write the <code>CMD</code> and <code>ENTRYPOINT</code> commands in your Dockerfiles in both array (exec) or string (shell) formats:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># array (exec)
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>CMD [&quot;gunicorn&quot;, &quot;-w&quot;, &quot;4&quot;, &quot;-k&quot;, &quot;uvicorn.workers.UvicornWorker&quot;, &quot;main:app&quot;]
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a># string (shell)
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>CMD &quot;gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app&quot;
</code></pre></div>
<p>Both are correct and achieve nearly the same thing; however, you should use the exec format whenever possible</p>
<ul>
<li>Make sure you're using the exec form of CMD and ENTRYPOINT in your Dockerfile.
For example use ["program", "arg1", "arg2"] not "program arg1 arg2". Using the string form causes Docker to run your process using bash, which doesn't handle signals properly.</li>
<li>Compose always uses the JSON form, so don't worry if you override the command or entrypoint in your Compose file.</li>
</ul>
<p>So, since most shells don't process signals to child processes, if you use the shell format, CTRL-C (which generates a SIGTERM) may not stop a child process.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>FROM ubuntu:24.04
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a># BAD: shell format
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>ENTRYPOINT top -d
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a># GOOD: exec format
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>ENTRYPOINT [&quot;top&quot;, &quot;-d&quot;]
</code></pre></div>
<p>Try both of these. Take note that with the shell format flavor, CTRL-C won't kill the process. Instead, you'll see ^C^C^C^C^C^C^C^C^C^C^C.</p>
<p>Another caveat is that the shell format carries the PID of the shell, not the process itself.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a># array format
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>root@18d8fd3fd4d2:/app# ps ax
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>  PID TTY      STAT   TIME COMMAND
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    1 ?        Ss     0:00 python manage.py runserver 0.0.0.0:8000
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    7 ?        Sl     0:02 /usr/local/bin/python manage.py runserver 0.0.0.0:8000
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>   25 pts/0    Ss     0:00 bash
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>  356 pts/0    R+     0:00 ps ax
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a># string format
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>root@ede24a5ef536:/app# ps ax
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>  PID TTY      STAT   TIME COMMAND
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>    1 ?        Ss     0:00 /bin/sh -c python manage.py runserver 0.0.0.0:8000
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>    8 ?        S      0:00 python manage.py runserver 0.0.0.0:8000
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>    9 ?        Sl     0:01 /usr/local/bin/python manage.py runserver 0.0.0.0:8000
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>   13 pts/0    Ss     0:00 bash
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>  342 pts/0    R+     0:00 ps ax
</code></pre></div>
<h2 id="understand-the-difference-between-entrypoint-and-cmd">Understand the Difference Between ENTRYPOINT and CMD<a class="headerlink" href="#understand-the-difference-between-entrypoint-and-cmd" title="Permanent link">&para;</a></h2>
<p>Should I use ENTRYPOINT or CMD to run container processes?</p>
<p>There are two ways to run commands in a container:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>CMD [&quot;gunicorn&quot;, &quot;config.wsgi&quot;, &quot;-b&quot;, &quot;0.0.0.0:8000&quot;]
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a># and
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>ENTRYPOINT [&quot;gunicorn&quot;, &quot;config.wsgi&quot;, &quot;-b&quot;, &quot;0.0.0.0:8000&quot;]
</code></pre></div>
<ul>
<li>
<p>CMD is easily overridden. If you run docker run <image_name> uvicorn config.asgi, the above CMD gets replaced by the new arguments -- i.e., uvicorn config.asgi.</p>
</li>
<li>
<p>to override the ENTRYPOINT command, one must specify the --entrypoint option:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>docker run --entrypoint uvicorn config.asgi &lt;image_name&gt;
</code></pre></div>
<p>it's recommended to use ENTRYPOINT over CMD to prevent accidentally overriding the command.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/ashishbindra2"  target="_blank" rel="noopener">Ashish Bindra</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ashishbindra2" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://in.linkedin.com/in/ashishbindra2/" target="_blank" rel="noopener" title="in.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotation", "content.code.copy", "navigation.sections", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "search.suggest", "search.highlight", "toc.follow"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>